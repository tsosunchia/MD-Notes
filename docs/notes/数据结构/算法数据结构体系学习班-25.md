# •算法数据结构体系学习班

## •第25节

### •单调栈是什么？

一种特别设计的栈结构，为了解决如下的问题：

给定一个可能含有重复值的数组arr，i位置的数一定存在如下两个信息

1）arr[i]的左侧离i最近并且小于(或者大于)arr[i]的数在哪？

2）arr[i]的右侧离i最近并且小于(或者大于)arr[i]的数在哪？

如果想得到arr中所有位置的两个信息，怎么能让得到信息的过程尽量快。

### 那么到底怎么设计呢？

#### •题目一

单调栈的实现

#### •题目二

给定一个只包含正数的数组arr，arr中任何一个子数组sub，

一定都可以算出(sub累加和 )* (sub中的最小值)是什么，

那么所有子数组中，这个值最大是多少？

#### •题目三

给定一个非负数组arr，代表直方图。返回直方图的最大长方形面积。

[leetcode 84. Largest Rectangle in Histogram | 84. 柱状图中最大的矩形（单调栈）](https://blog.csdn.net/sinat_42483341/article/details/120302405)

#### •题目四

给定一个二维数组matrix，其中的值不是0就是1，

返回全部由1组成的最大子矩形，内部有多少个1

[leetcode 85. Maximal Rectangle | 85. 最大矩形（单调栈）](https://blog.csdn.net/sinat_42483341/article/details/120326122)

> 本题与题目三思路相同，转化成直方图问题，提示：每一行都转化成一个直方图数组，以第i行做底的情况下，哪一个长方形是最大的。

#### •题目五

给定一个二维数组matrix，其中的值不是0就是1，

返回全部由1组成的子矩形数量

[leetcode 1504. Count Submatrices With All Ones | 1504. 统计全 1 子矩形（单调栈）](https://hanquan.blog.csdn.net/article/details/120675103)

> 分别以每一行做底计算子矩阵个数，这样既不会算多，也不会算少
>
> 具体每一行做底的子矩阵个数怎么求呢？
>
> 如果以当前高度 h 的大区域底的长度为 n，则当前高度 h 的长方形的个数为 1+2+...+n, 即 n*(n+1)/2
>
> 同时，你要计算高度为 h-1, h-2, ..., (一直减到左右两边第一个能顶到的位置) 的大区域的长方形个数。