# TCP协议的滑动窗口具体是怎样控制流量的？

作者：安静的木小昊
链接：https://www.zhihu.com/question/32255109/answer/495373328
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。



## 看这个场景：老师说一段话, 学生来记. 

老师说"从前有个人, 她叫[马冬梅](https://www.zhihu.com/search?q=马冬梅&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A495373328}). 她喜欢他, 而他却喜欢她."

学生写道"从前有..". "老师你说的太快我跟不上"

## 于是他们换了一种模式.

老师说"从"

学生写"从". 学生说"嗯"

老师说"前"

学生写"前". 学生说"嗯"

老师说"今天我还想早点下班呢..."

## 于是他们换了一种模式. 

老师说"从前有个人"

学生写"从前有个人". 学生说"嗯"

老师说"她叫马冬梅". 

学生写"她叫马...梅". 学生说"马什么梅?"

老师说"她叫马冬梅". 

学生写"她叫马冬...". 学生说"马冬什么?"

老师"....."

学生说"有的时候状态好我能把5个字都记下来, 有的时候状态不好就记不下来. 我状态不好的时候你能不能慢一点. "

## 于是他们换了一种模式

老师说"从前有个人"

学生写"从前有个人". 学生说"嗯, 再来5个"

老师说"她叫马冬梅"

学生写"她叫马..梅". 学生说"啥?重来, 来2个"

老师说"她叫"

学生写"她叫". 学生说"嗯,再来3个"

老师说"马冬梅". 

学生写"马冬梅". 学生说"嗯, 给我来10个"

老师说"她喜欢他,而他却喜欢她"

学生写...

## 所以呢

第一种模式简单粗暴, 发的只管发, 收的更不上.

第二种模式稳定却低效, 每发一个, 必须等到确认才再次发送, 等待时间很多.

第三种模式提高了效率, 分组进行发送, 但是分组的大小该怎么决定呢?

第四中模式才是起到了流控的作用, 接收方认为状态好的时候, 让发送方每次多发一点. 接收方认为状态不好的时候(阻塞), 让发送方每次少发送一点. 

一点粗浅的理解, 有错误的地方望指证